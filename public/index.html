<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- âœ… PreconexiÃ³n de fuentes -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="./shared/variables.css">
    <link rel="stylesheet" href="./shared/global.css">
    <link rel="stylesheet" href="./styles/app.css">

    <title>RIZZO - WhatsApp Bot Manager</title>
</head>
<body>
    <div class="container">
        <header>
            <h1>ðŸ¤– RIZZO</h1>
            <p>WhatsApp Bot Manager - Plataforma de GestiÃ³n</p>
        </header>

        <div class="tabs">
            <button class="tab-button active" onclick="switchTab('dashboard')">ðŸ“Š Dashboard</button>
            <button class="tab-button" onclick="switchTab('clients')">ðŸ‘¥ Clientes</button>
            <button class="tab-button" onclick="switchTab('bots')">ðŸ¤– Bots</button>
        </div>

        <!-- TAB: Dashboard -->
        <div id="dashboard" class="tab-content active">
            <h2>Dashboard</h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-top: 20px;">
                <div class="card">
                    <div class="info-row">
                        <span class="info-label">Total Clientes:</span>
                        <span class="info-value" id="totalClients">-</span>
                    </div>
                </div>
                <div class="card">
                    <div class="info-row">
                        <span class="info-label">Bots Activos:</span>
                        <span class="info-value" id="activeBots">-</span>
                    </div>
                </div>
                <div class="card">
                    <div class="info-row">
                        <span class="info-label">Estado API:</span>
                        <span class="info-value"><span class="status-badge status-active">Conectado</span></span>
                    </div>
                </div>
            </div>

            <h3 style="margin-top: 30px; margin-bottom: 20px;">Estado de Bots en Tiempo Real</h3>
            <div id="botsStatus" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px;">
                <div class="empty-state">
                    <p>Cargando informaciÃ³n...</p>
                </div>
            </div>
        </div>

        <!-- TAB: Clientes -->
        <div id="clients" class="tab-content">
            <h2>GestiÃ³n de Clientes</h2>

            <div id="clientAlert" class="alert"></div>

            <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 30px;">
                <h3 style="margin-bottom: 20px;">Crear Nuevo Cliente</h3>
                <form id="clientForm" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                    <div class="form-group" style="grid-column: span 1;">
                        <label>ID del Cliente</label>
                        <input type="text" id="clientId" placeholder="ej: client001" required>
                    </div>
                    <div class="form-group" style="grid-column: span 1;">
                        <label>Nombre</label>
                        <input type="text" id="clientName" placeholder="ej: Mi Restaurante" required>
                    </div>
                    <div class="form-group" style="grid-column: span 1;">
                        <label>Email</label>
                        <input type="email" id="clientEmail" placeholder="ej: admin@mirestaurante.com" required>
                    </div>
                    <div class="form-group" style="grid-column: span 1;">
                        <label>TelÃ©fono WhatsApp</label>
                        <input type="text" id="clientPhone" placeholder="ej: +51987654321" required>
                    </div>
                    <div class="form-group" style="grid-column: span 1;">
                        <label>Flujo Inicial</label>
                        <select id="clientFlow">
                            <option value="default">Default</option>
                            <option value="foodies">Foodies (Restaurante)</option>
                            <option value="hotel">Hotel</option>
                        </select>
                    </div>
                    <button type="button" onclick="createClient()" style="grid-column: span 1; align-self: flex-end;">Crear Cliente</button>
                </form>
            </div>

            <h3 style="margin-bottom: 20px;">Clientes Registrados</h3>
            <div id="clientsList" class="clients-grid">
                <div class="empty-state">
                    <p>Cargando clientes...</p>
                </div>
            </div>
        </div>

        <!-- TAB: Bots -->
        <div id="bots" class="tab-content">
            <h2>Control de Bots</h2>

            <div id="botAlert" class="alert"></div>

            <div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin-bottom: 30px;">
                <h3 style="margin-bottom: 20px;">Iniciar Bot para Cliente</h3>
                <div style="display: grid; grid-template-columns: 1fr auto; gap: 20px; align-items: flex-end;">
                    <div class="form-group" style="margin: 0;">
                        <label>Seleccionar Cliente</label>
                        <select id="botClientSelect">
                            <option value="">-- Seleccionar cliente --</option>
                        </select>
                    </div>
                    <button type="button" onclick="startBot()">Iniciar Bot</button>
                </div>
            </div>

            <h3 style="margin-bottom: 20px;">Bots Activos</h3>
            <div id="botsControl" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px;">
                <div class="empty-state">
                    <p>Cargando bots...</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Biblioteca para generar cÃ³digos QR en el navegador -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <!-- Importar script principal -->
    <script src="./main.js"></script>
</body>
</html>
